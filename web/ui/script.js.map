{"version":3,"sources":["main.js"],"names":["imageContainer","document","getElementById","allImages","setImages","arr","innerText","length","changeParam","param","value","eel","set_param","refreshImages","get_images","RUNNING","CANCEL","TOTAL","startConversion","classList","add","style","height","opacity","console","log","requestAnimationFrame","convertImage","reset","remove","int","parts","convert","addEventListener","ev","target","text","parseInt","checked"],"mappings":"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","file":"script.js","sourcesContent":["const imageContainer = document.getElementById(\"image-container\");\r\n\r\nlet allImages = [];\r\nfunction setImages(arr) {\r\n  //   console.log(arr);\r\n  //   imageContainer.childNodes.forEach((node) => {\r\n  //     node.remove();\r\n  //   });\r\n  //   arr.forEach((src) => {\r\n  //     const template = document.getElementById(\"imageTemplate\");\r\n  //     let newImage = template.content.cloneNode(true).childNodes[1];\r\n  //     newImage.childNodes[1].src = src;\r\n  //     imageContainer.appendChild(newImage);\r\n  //\r\n  //   });\r\n  allImages = arr;\r\n  document.getElementById(\"image-desc\").innerText = \"Images found: \" + arr.length;\r\n}\r\n\r\n// setImages(testImages);\r\n\r\neel.get_images()(setImages);\r\nfunction changeParam(param, value) {\r\n  eel.set_param(param, value);\r\n}\r\nfunction refreshImages() {\r\n  eel.get_images()(setImages);\r\n}\r\nlet RUNNING = false;\r\nlet CANCEL = false;\r\nlet TOTAL = 0;\r\nfunction startConversion() {\r\n  if (allImages.length === 0) return;\r\n  if (RUNNING) {\r\n    CANCEL = true;\r\n    document.getElementById(\"convert-btn\").classList.add(\"disabled\");\r\n    return;\r\n  }\r\n  RUNNING = true;\r\n  document.getElementById(\"convert-btn\").classList.add(\"cancel\");\r\n  document.getElementById(\"convert-btn\").innerText = \"Cancel\";\r\n  document.getElementById(\"inputs-box\").style.height = \"85vmin\";\r\n  document.getElementById(\"loading-bar\").style.opacity = \"\";\r\n  document.getElementById(\"loading-bar\").value = \"0\";\r\n  console.log(allImages);\r\n  requestAnimationFrame(() => {\r\n    convertImage(0);\r\n  });\r\n}\r\n\r\nfunction reset() {\r\n  CANCEL = false;\r\n  RUNNING = false;\r\n  document.getElementById(\"convert-btn\").innerText = \"Convert\";\r\n  document.getElementById(\"inputs-box\").style.height = \"75vmin\";\r\n  document.getElementById(\"loading-bar\").style.opacity = 0;\r\n  document.getElementById(\"loading-bar\").value = \"0\";\r\n  document.getElementById(\"convert-btn\").classList.remove(\"disabled\");\r\n  TOTAL = 0;\r\n}\r\n\r\nfunction convertImage(int) {\r\n  let parts = 100 / allImages.length || 0;\r\n  if (CANCEL) {\r\n    reset();\r\n    return;\r\n  } else {\r\n    eel.convert(allImages[int])(() => {\r\n      TOTAL += parts;\r\n      document.getElementById(\"loading-bar\").value = TOTAL + \"\";\r\n      if (int == allImages.length - 1) {\r\n        reset();\r\n      } else {\r\n        convertImage(int + 1);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\ndocument.getElementById(\"max_res\").value = \"2100\";\r\ndocument.getElementById(\"max_res_text\").innerText = \"None\";\r\ndocument.getElementById(\"max_res\").addEventListener(\"input\", (ev) => {\r\n  document.getElementById(\"max_res_text\").innerText = ev.target.value === \"2100\" ? \"None\" : ev.target.value + \"px\";\r\n  changeParam(\"max_res\", ev.target.value === \"2100\" ? \"None\" : ev.target.value);\r\n});\r\ndocument.getElementById(\"compression\").value = 100;\r\ndocument.getElementById(\"compression_text\").innerText = \"100% (None)\";\r\ndocument.getElementById(\"compression\").addEventListener(\"input\", (ev) => {\r\n  let text = ev.target.value + \"%\";\r\n  let value = parseInt(ev.target.value);\r\n  if (value < 15) {\r\n    text += \" (Tiny)\";\r\n  } else if (value < 25) {\r\n    text += \" (Small)\";\r\n  } else if (value < 50) {\r\n    text += \" (Medium)\";\r\n  } else if (value < 85) {\r\n    text += \" (Regular)\";\r\n  } else if (value < 100) {\r\n    text += \" (Quality)\";\r\n  } else {\r\n    text += \" (None)\";\r\n  }\r\n  document.getElementById(\"compression_text\").innerText = text;\r\n  changeParam(\"compression\", ev.target.value);\r\n});\r\ndocument.getElementById(\"strip_exif\").addEventListener(\"input\", (ev) => {\r\n  changeParam(\"strip_exif\", ev.target.checked);\r\n});\r\ndocument.getElementById(\"filetype\").value = \"png\";\r\ndocument.getElementById(\"filetype\").addEventListener(\"change\", (ev) => {\r\n  changeParam(\"filetype\", ev.target.value);\r\n});\r\ndocument.getElementById(\"remove_bg\").addEventListener(\"input\", (ev) => {\r\n  changeParam(\"remove_bg\", ev.target.checked);\r\n});\r\ndocument.getElementById(\"convert-btn\").addEventListener(\"click\", startConversion);\r\ndocument.getElementById(\"refresh-btn\").addEventListener(\"click\", refreshImages);\r\n\r\ndocument.getElementById(\"inputs-box\").style.height = \"75vmin\";\r\ndocument.getElementById(\"loading-bar\").style.opacity = 0;\r\n"]}